"use strict";function pickRandom(t){return t[Math.floor(Math.random()*t.length)]}function editWordset(t){window.location="/wordset/"+t}$("#sentence-form").on("submit",function(){var t=$("#s_original").val(),e=$("#s_translation").val();return $.post("/sentences/add",{s_original:t,s_translation:e},function(n){n=JSON.parse(n),200===n.status?($("#sentence-list").prepend(template({s_original:t,s_translation:e,_id:n._id})),$("#s_original").val("").focus(),$("#s_translation").val("")):alert("Failed to add new sentence")}),!1}),$(document).on("click",".edit",function(){var t=$(this).parent().parent(),e=$(t).find(".word").text(),n=$(t).find(".translation").text();$("#word").val(e),$("#translation").val(n).focus()}),$(document).on("click",".delete",function(){var t=$(this).parent().parent(),e=t.attr("_id");$.post("/sentences/delete",{_id:e},function(){t.remove()})}),String.prototype.format=function(){for(var t=this,e=0;e<arguments.length;e++){var n=new RegExp("\\{"+e+"\\}","gi");t=t.replace(n,arguments[e])}return t};var practice=new Vue({el:"#pracice",data:data,getAnswer:function(t,e){var n=_.find(this.data.wordsets,{name:t});return _.find(n.words,{_id:e})},pickSentences:function(t){var e=[];for(i=0;i<t;i++)e.push(pickRandom(data.sentences));return e}});console.log(data);var source=$("#sentence-template").html(),template=Handlebars.compile(source);data.forEach(function(t){$("#sentence-list").prepend(template(t))});var sentences=new Vue({el:"#sentences",dat:data});console.log(data);var source=$("#word-template").html(),template=Handlebars.compile(source);data.words.forEach(function(t){$("#wordset-list").prepend(template(t))}),$("#word-form").on("submit",function(){var t=$("#word").val(),e=$("#translation").val();return $.post("/wordset/add",{_id:data._id,w:t,t:e},function(n){n=JSON.parse(n),200===n.status?(!1===n.replace?$("#wordset-list").prepend(template({w:t,t:e,_id:n._id})):$("[_id="+n._id+"]").find(".translation").text(e),$("#word").val("").focus(),$("#translation").val("")):alert("Failed to add new word")}),!1}),$(document).on("click",".edit",function(){var t=$(this).parent().parent(),e=$(t).find(".word").text(),n=$(t).find(".translation").text();$("#word").val(e),$("#translation").val(n).focus()}),$(document).on("click",".delete",function(){var t=$(this).parent().parent(),e=t.attr("_id");console.log(e),$.post("/wordset/delete-word",{_id:data._id,wordId:e},function(){t.remove()})}),$(document).on("click",".edit",function(){editWordset($(this).parent().parent().attr("_id"))}),$(document).on("click",".delete",function(){var t=$(this).parent().parent().attr("_id");confirm("Are you sure you want to delete this wordset? This cannot be undone.")&&$.post("/wordsets/delete",{_id:t},function(){window.location="/wordsets/"})}),$(document).on("click",".wordset-name",function(){editWordset($(this).parent().attr("_id"))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlbHBlcnMuanMiLCJ3b3Jkc2V0cy5qcyIsImV2ZW50TGlzdGVuZXJzLmpzIiwicHJhY3RpY2UuanMiLCJzZW50ZW5jZXMuanMiLCJ3b3Jkc2V0LmpzIl0sIm5hbWVzIjpbInBpY2tSYW5kb20iLCJsaXN0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwiZWRpdFdvcmRzZXQiLCJfaWQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsIiQiLCJvbiIsIm8iLCJ2YWwiLCJ0IiwicG9zdCIsInNfb3JpZ2luYWwiLCJzX3RyYW5zbGF0aW9uIiwicmVzIiwiSlNPTiIsInBhcnNlIiwic3RhdHVzIiwicHJlcGVuZCIsInRlbXBsYXRlIiwiZm9jdXMiLCJhbGVydCIsImRvY3VtZW50IiwiZWxlbSIsInRoaXMiLCJwYXJlbnQiLCJ3IiwiZmluZCIsInRleHQiLCJhdHRyIiwicmVtb3ZlIiwiU3RyaW5nIiwicHJvdG90eXBlIiwiZm9ybWF0IiwiZm9ybWF0dGVkIiwiaSIsImFyZ3VtZW50cyIsInJlZ2V4cCIsIlJlZ0V4cCIsInJlcGxhY2UiLCJwcmFjdGljZSIsIlZ1ZSIsImVsIiwiZGF0YSIsImdldEFuc3dlciIsIndvcmRzZXROYW1lIiwicXVlcnkiLCJ3b3Jkc2V0IiwiXyIsIndvcmRzZXRzIiwibmFtZSIsIndvcmRzIiwicGlja1NlbnRlbmNlcyIsIm51bSIsInJlc3VsdCIsInB1c2giLCJzZW50ZW5jZXMiLCJjb25zb2xlIiwibG9nIiwic291cmNlIiwiaHRtbCIsIkhhbmRsZWJhcnMiLCJjb21waWxlIiwiZm9yRWFjaCIsInNlbnRlbmNlIiwiZGF0Iiwid29yZCIsIndvcmRJZCIsImNvbmZpcm0iXSwibWFwcGluZ3MiOiJZQVNBLFNBQVNBLFlBQVdDLEdBQ2hCLE1BQU9BLEdBQUtDLEtBQUtDLE1BQU1ELEtBQUtFLFNBQVdILEVBQUtJLFNDVmhELFFBQVNDLGFBQVlDLEdBQ2pCQyxPQUFPQyxTQUFXLFlBQWNGLEVDQXBDRyxFQUFFLGtCQUFrQkMsR0FB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SyxnQkFBZ0JDLEtBQUtsQixHQUV6REosRUFBRSxTQUFTRyxJQUFJLElBQUlXLFFBQ25CZCxFQUFFLGdCQUFnQkcsSUFBSSxLQUV0QlksTUFBTSw2QkFHUCxJQUtYZixFQUFFZ0IsVUFBVWYsR0FBRyxRQUFTLFFBQVMsV0FDN0IsR0FBSWdCLEdBQU9qQixFQUFFa0IsTUFBTUMsU0FBU0EsU0FDeEJDLEVBQUlwQixFQUFFaUIsR0FBTUksS0FBSyxTQUFTQyxPQUMxQmxCLEVBQUlKLEVBQUVpQixHQUFNSSxLQUFLLGdCQUFnQkMsTUFFckN0QixHQUFFLFNBQVNHLElBQUlpQixHQUNmcEIsRUFBRSxnQkFBZ0JHLElBQUlDLEdBQUdVLFVBSTdCZCxFQUFFZ0IsVUFBVWYsR0FBRyxRQUFTLFVBQVcsV0FDL0IsR0FBSWdCLEdBQU9qQixFQUFFa0IsTUFBTUMsU0FBU0EsU0FDeEIwQyxFQUFTNUMsRUFBS00sS0FBSyxNQUV2QjRCLFNBQVFDLElBQUlTLEdBRVo3RCxFQUFFSyxLQUFLLHdCQUEwQlIsSUFBS3dDLEtBQUt4QyxJQUFLZ0UsT0FBUUEsR0FBVSxXQUM5RDVDLEVBQUtPLGFKMURieEIsRUFBRWdCLFVBQVVmLEdBQUcsUUFBUyxRQUFTLFdBQzdCTCxZQUFZSSxFQUFFa0IsTUFBTUMsU0FBU0EsU0FBU0ksS0FBSyxVQUcvQ3ZCLEVBQUVnQixVQUFVZixHQUFHLFFBQVMsVUFBVyxXQUMvQixHQUFJSixHQUFNRyxFQUFFa0IsTUFBTUMsU0FBU0EsU0FBU0ksS0FBSyxNQUVyQ3VDLFNBQVEseUVBQ1I5RCxFQUFFSyxLQUFLLG9CQUFzQlIsSUFBS0EsR0FBTyxXQUNyQ0MsT0FBT0MsU0FBVyxpQkFLOUJDLEVBQUVnQixVQUFVZixHQUFHLFFBQVMsZ0JBQWlCLFdBQ3JDTCxZQUFZSSxFQUFFa0IsTUFBTUMsU0FBU0ksS0FBSyIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZm9ybWF0dGVkID0gdGhpcztcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoJ1xcXFx7JyArIGkgKyAnXFxcXH0nLCAnZ2knKTtcclxuICAgICAgICBmb3JtYXR0ZWQgPSBmb3JtYXR0ZWQucmVwbGFjZShyZWdleHAsIGFyZ3VtZW50c1tpXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm9ybWF0dGVkO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gcGlja1JhbmRvbShsaXN0KSB7XHJcbiAgICByZXR1cm4gbGlzdFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsaXN0Lmxlbmd0aCldO1xyXG59XHJcbiIsImZ1bmN0aW9uIGVkaXRXb3Jkc2V0KF9pZCkge1xyXG4gICAgd2luZG93LmxvY2F0aW9uID0gJy93b3Jkc2V0LycgKyBfaWQ7XHJcbn1cclxuXHJcbiQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZWRpdCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGVkaXRXb3Jkc2V0KCQodGhpcykucGFyZW50KCkucGFyZW50KCkuYXR0cignX2lkJykpO1xyXG59KTtcclxuXHJcbiQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZGVsZXRlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIF9pZCA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuYXR0cignX2lkJyk7XHJcblxyXG4gICAgaWYgKGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyB3b3Jkc2V0PyBUaGlzIGNhbm5vdCBiZSB1bmRvbmUuJykpIHtcclxuICAgICAgICAkLnBvc3QoJy93b3Jkc2V0cy9kZWxldGUnLCB7IF9pZDogX2lkIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJy93b3Jkc2V0cy8nO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbiQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcud29yZHNldC1uYW1lJywgZnVuY3Rpb24gKCkge1xyXG4gICAgZWRpdFdvcmRzZXQoJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdfaWQnKSk7XHJcbn0pO1xyXG4iLCIvLyBBZGQgbmV3IHdvcmRcclxuJCgnI3NlbnRlbmNlLWZvcm0nKS5vbignc3VibWl0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG8gPSAkKCcjc19vcmlnaW5hbCcpLnZhbCgpO1xyXG4gICAgdmFyIHQgPSAkKCcjc190cmFuc2xhdGlvbicpLnZhbCgpO1xyXG5cclxuICAgICQucG9zdCgnL3NlbnRlbmNlcy9hZGQnLCB7XHJcbiAgICAgICAgc19vcmlnaW5hbDogbyxcclxuICAgICAgICBzX3RyYW5zbGF0aW9uOiB0XHJcbiAgICB9LCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgcmVzID0gSlNPTi5wYXJzZShyZXMpO1xyXG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgJCgnI3NlbnRlbmNlLWxpc3QnKS5wcmVwZW5kKHRlbXBsYXRlKHtcclxuICAgICAgICAgICAgICAgIHNfb3JpZ2luYWw6IG8sXHJcbiAgICAgICAgICAgICAgICBzX3RyYW5zbGF0aW9uOiB0LFxyXG4gICAgICAgICAgICAgICAgX2lkOiByZXMuX2lkXHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgICQoJyNzX29yaWdpbmFsJykudmFsKCcnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAkKCcjc190cmFuc2xhdGlvbicpLnZhbCgnJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWxlcnQoJ0ZhaWxlZCB0byBhZGQgbmV3IHNlbnRlbmNlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59KTtcclxuXHJcbi8vIEVkaXQgd29yZFxyXG4kKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmVkaXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZWxlbSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICB2YXIgdyA9ICQoZWxlbSkuZmluZCgnLndvcmQnKS50ZXh0KCk7XHJcbiAgICB2YXIgdCA9ICQoZWxlbSkuZmluZCgnLnRyYW5zbGF0aW9uJykudGV4dCgpO1xyXG5cclxuICAgICQoJyN3b3JkJykudmFsKHcpO1xyXG4gICAgJCgnI3RyYW5zbGF0aW9uJykudmFsKHQpLmZvY3VzKCk7XHJcbn0pO1xyXG5cclxuLy8gRGVsZXRlIHNlbnRlbmNlXHJcbiQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZGVsZXRlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGVsZW0gPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgdmFyIF9pZCA9IGVsZW0uYXR0cignX2lkJyk7XHJcblxyXG4gICAgJC5wb3N0KCcvc2VudGVuY2VzL2RlbGV0ZScsIHsgX2lkOiBfaWQgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVsZW0ucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IHByYWN0aWNlID0gbmV3IFZ1ZSh7XHJcbiAgICBlbDogJyNwcmFjaWNlJyxcclxuICAgIGRhdGE6IGRhdGEsXHJcblxyXG4gICAgZ2V0QW5zd2VyKHdvcmRzZXROYW1lLCBxdWVyeSkge1xyXG4gICAgICAgIGxldCB3b3Jkc2V0ID0gXy5maW5kKHRoaXMuZGF0YS53b3Jkc2V0cywgeyBuYW1lOiB3b3Jkc2V0TmFtZSB9KTtcclxuICAgICAgICByZXR1cm4gXy5maW5kKHdvcmRzZXQud29yZHMsIHsgX2lkOiBxdWVyeSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgcGlja1NlbnRlbmNlcyhudW0pIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHBpY2tSYW5kb20oZGF0YS5zZW50ZW5jZXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufSk7XHJcbiIsImNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxudmFyIHNvdXJjZSA9ICQoJyNzZW50ZW5jZS10ZW1wbGF0ZScpLmh0bWwoKTtcclxudmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKHNvdXJjZSk7XHJcblxyXG4vLyBBcHBlbmQgc2VudGVuY2VzXHJcbmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoc2VudGVuY2UpIHtcclxuICAgICQoJyNzZW50ZW5jZS1saXN0JykucHJlcGVuZCh0ZW1wbGF0ZShzZW50ZW5jZSkpO1xyXG59KTtcclxuXHJcblxyXG5jb25zdCBzZW50ZW5jZXMgPSBuZXcgVnVlKHtcclxuICAgIGVsOiAnI3NlbnRlbmNlcycsXHJcbiAgICBkYXQ6IGRhdGFcclxufSk7XHJcbiIsIlxyXG5jb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbnZhciBzb3VyY2UgPSAkKCcjd29yZC10ZW1wbGF0ZScpLmh0bWwoKTtcclxudmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKHNvdXJjZSk7XHJcblxyXG4vLyBBcHBlbmQgd29yZHNcclxuZGF0YS53b3Jkcy5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkKSB7XHJcbiAgICAkKCcjd29yZHNldC1saXN0JykucHJlcGVuZCh0ZW1wbGF0ZSh3b3JkKSk7XHJcbn0pO1xyXG5cclxuLy8gQWRkIG5ldyB3b3JkXHJcbiQoJyN3b3JkLWZvcm0nKS5vbignc3VibWl0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHcgPSAkKCcjd29yZCcpLnZhbCgpO1xyXG4gICAgdmFyIHQgPSAkKCcjdHJhbnNsYXRpb24nKS52YWwoKTtcclxuXHJcbiAgICAkLnBvc3QoJy93b3Jkc2V0L2FkZCcsIHtcclxuICAgICAgICBfaWQ6IGRhdGEuX2lkLFxyXG4gICAgICAgIHc6IHcsXHJcbiAgICAgICAgdDogdFxyXG4gICAgfSwgZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgIHJlcyA9IEpTT04ucGFyc2UocmVzKTtcclxuICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXMucmVwbGFjZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBuZXcgd29yZFxyXG4gICAgICAgICAgICAgICAgJCgnI3dvcmRzZXQtbGlzdCcpLnByZXBlbmQodGVtcGxhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHc6IHcsXHJcbiAgICAgICAgICAgICAgICAgICAgdDogdCxcclxuICAgICAgICAgICAgICAgICAgICBfaWQ6IHJlcy5faWRcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgZXhpc3Rpbmcgd29yZFxyXG4gICAgICAgICAgICAgICAgJCgnW19pZD0nICsgcmVzLl9pZCArICddJykuZmluZCgnLnRyYW5zbGF0aW9uJykudGV4dCh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcjd29yZCcpLnZhbCgnJykuZm9jdXMoKTtcclxuICAgICAgICAgICAgJCgnI3RyYW5zbGF0aW9uJykudmFsKCcnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbGVydCgnRmFpbGVkIHRvIGFkZCBuZXcgd29yZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59KTtcclxuXHJcblxyXG4vLyBFZGl0IHdvcmRcclxuJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5lZGl0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGVsZW0gPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgdmFyIHcgPSAkKGVsZW0pLmZpbmQoJy53b3JkJykudGV4dCgpO1xyXG4gICAgdmFyIHQgPSAkKGVsZW0pLmZpbmQoJy50cmFuc2xhdGlvbicpLnRleHQoKTtcclxuXHJcbiAgICAkKCcjd29yZCcpLnZhbCh3KTtcclxuICAgICQoJyN0cmFuc2xhdGlvbicpLnZhbCh0KS5mb2N1cygpO1xyXG59KTtcclxuXHJcbi8vIERlbGV0ZSB3b3JkXHJcbiQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZGVsZXRlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGVsZW0gPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpO1xyXG4gICAgdmFyIHdvcmRJZCA9IGVsZW0uYXR0cignX2lkJyk7XHJcblxyXG4gICAgY29uc29sZS5sb2cod29yZElkKTtcclxuXHJcbiAgICAkLnBvc3QoJy93b3Jkc2V0L2RlbGV0ZS13b3JkJywgeyBfaWQ6IGRhdGEuX2lkLCB3b3JkSWQ6IHdvcmRJZCB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZWxlbS5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG59KTtcclxuIl19
